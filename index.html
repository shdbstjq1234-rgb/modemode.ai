<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mode l mode Â· AI ëª¨ë¸ ìŠ¤íŠœë””ì˜¤</title>
<style>
:root{
  --brand:#ff6c0f;
  --brand2:#ff9550;
  --bg-dark:#050711;
  --bg-light:#f7f5f0;
}
/* ê¸°ë³¸ ì…‹ì—… */
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic,Helvetica,Arial}

/* ===== í…Œë§ˆ (ê¸°ë³¸: ë‹¤í¬) ===== */
.page{
  --bg:var(--bg-dark);
  --ink:#f7f9fc;
  --muted:#9ca3b4;
  --line:#262a3c;
  --glass:rgba(8,10,16,.8);
  --panel:#101424;
  --bd:#282f46;
  --field:#0d1220;
  --chip:#171c2c;
  --chip-on:#222a3f;
  --preview:#090c18;
  --code:#050814;
  --btn-bg:rgba(255,255,255,.06);
  --badge:#272f46;
  color:var(--ink);
  background:
    radial-gradient(900px 600px at 10% 0%, rgba(255,122,33,.18), transparent 55%),
    radial-gradient(900px 600px at 90% 0%, rgba(255,149,80,.16), transparent 60%),
    var(--bg);
  min-height:100vh;
}
#themeSwitch:checked ~ .page{
  --bg:var(--bg-light);
  --ink:#12131a;
  --muted:#747070;
  --line:#e2ddd1;
  --glass:rgba(255,255,255,.9);
  --panel:#fdfbf7;
  --bd:#d5d0c4;
  --field:#f3f0e8;
  --chip:#ebe6dd;
  --chip-on:#e0d7c9;
  --preview:#f3efe7;
  --code:#f8f4ed;
  --btn-bg:rgba(0,0,0,.04);
  --badge:#ebe5da;
}

/* ê³µí†µ */
.hidden{display:none}
a{color:inherit}
button{font-family:inherit}

/* ìƒë‹¨ ë°” */
.topbar{
  position:fixed; inset:0 0 auto 0; z-index:90;
  background:var(--glass); backdrop-filter:saturate(180%) blur(14px);
  border-bottom:1px solid var(--line);
}
.topbar-inner{
  max-width:1200px;margin:0 auto;
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 18px;
}
.logo-wrap{display:flex;align-items:center;gap:10px}
.svglogo{width:34px;height:34px;border-radius:10px;display:grid;place-items:center;
  background:radial-gradient(circle at 0% 0%,#ffb25f,#ff6c0f);
  box-shadow:0 10px 26px rgba(0,0,0,.35);
}
.svglogo svg{width:22px;height:22px}
.brand-name{font-weight:900;letter-spacing:.18px;font-size:18px}
.main-nav{display:flex;align-items:center;gap:8px;margin-left:24px}
.nav-link{
  border:none;background:transparent;color:var(--muted);
  padding:8px 12px;border-radius:999px;font-size:14px;cursor:pointer;
}
.nav-link.active{color:var(--ink);background:var(--btn-bg);font-weight:700}
.topbar-right{display:flex;align-items:center;gap:8px}
.authbtn{
  display:inline-flex;align-items:center;gap:6px;
  padding:8px 12px;border-radius:999px;
  border:1px solid var(--line);
  background:var(--btn-bg);
  font-size:13px;font-weight:700;
  text-decoration:none;color:var(--ink);cursor:pointer;
}
.authbtn.primary{
  border:none;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  color:#070709;
}
.themebtn{
  display:inline-grid;place-items:center;
  width:34px;height:34px;border-radius:50%;
  border:1px solid var(--line);background:var(--btn-bg);
  cursor:pointer;
}
.themebtn svg{width:18px;height:18px}
.themebtn .sun{display:block}
.themebtn .moon{display:none}
#themeSwitch:checked ~ .page .themebtn .sun{display:none}
#themeSwitch:checked ~ .page .themebtn .moon{display:block}

/* ===== ì „ì²´ ë ˆì´ì•„ì›ƒ ===== */
.shell{padding-top:56px;}
.view{
  display:none;
  min-height:calc(100vh - 56px);
  padding:32px 16px 40px;
}
.view.active{display:block}
.container{max-width:1200px;margin:0 auto}

/* ===== HOME / ëœë”© ===== */
.hero{
  display:grid;
  grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);
  gap:40px;
  align-items:center;
}
.hero-copy h1{
  font-size:40px;line-height:1.15;margin:0 0 10px 0;letter-spacing:-0.04em;
}
.hero-copy h1 strong{
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  -webkit-background-clip:text;background-clip:text;color:transparent;
}
.hero-copy p{margin:0 0 18px 0;font-size:15px;color:var(--muted)}
.hero-cta{display:flex;flex-wrap:wrap;gap:10px}
.btn{
  padding:11px 16px;border-radius:999px;
  border:1px solid var(--line);
  background:var(--btn-bg);
  color:var(--ink);
  font-size:14px;font-weight:800;
  cursor:pointer;text-decoration:none;
}
.btn.primary{
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  border:none;color:#050508;
}
.btn.soft{background:var(--chip)}
.hero-preview{
  border-radius:22px;
  background:radial-gradient(circle at 0% 0%, rgba(255,132,78,.25), transparent 60%),
             radial-gradient(circle at 100% 100%, rgba(151,210,255,.18), transparent 55%),
             var(--panel);
  border:1px solid var(--bd);
  padding:14px;
  box-shadow:0 28px 80px rgba(0,0,0,.40);
}
.hero-preview-inner{
  border-radius:16px;
  background:var(--preview);
  border:1px dashed var(--bd);
  height:260px;
  display:grid;place-items:center;
  color:var(--muted);font-size:13px;
}
.hero-stats{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px;font-size:11px;color:var(--muted)}
.hero-stat-pill{
  padding:6px 10px;border-radius:999px;
  background:var(--badge);
  border:1px solid var(--line);
}

/* ê¸°ëŠ¥ ì„¹ì…˜ */
.feature-grid{
  margin-top:36px;
  display:grid;
  gap:14px;
  grid-template-columns:repeat(3, minmax(0,1fr));
}
.feature-card{
  background:var(--panel);border:1px solid var(--bd);
  border-radius:16px;padding:14px 14px 16px;
}
.feature-card h3{margin:0 0 4px 0;font-size:15px}
.feature-card p{margin:0;font-size:12px;color:var(--muted)}
.feature-tag{font-size:11px;color:var(--muted);margin-bottom:6px}

/* ===== ìºë¦­í„° ì¶”ì²œ í˜ì´ì§€ ===== */
.char-header{display:flex;align-items:flex-end;justify-content:space-between;gap:18px;margin-bottom:16px}
.char-header-title h2{margin:0 0 4px 0;font-size:22px}
.char-header-title p{margin:0;font-size:13px;color:var(--muted)}
.char-filters{display:flex;flex-wrap:wrap;gap:8px}
.chip{
  padding:7px 11px;border-radius:999px;
  border:1px solid var(--bd);
  background:var(--chip);
  font-size:12px;color:var(--muted);
  cursor:pointer;
}
.chip.active{background:var(--chip-on);color:var(--ink);border-color:var(--brand)}
.char-search-row{
  display:flex;flex-wrap:wrap;gap:10px;align-items:center;
  margin-bottom:14px;
}
.input{
  width:100%;padding:9px 11px;border-radius:10px;
  border:1px solid var(--bd);background:var(--field);
  color:var(--ink);font-size:13px;
}
.char-search{flex:1 1 220px}
.char-sort{display:flex;gap:6px}
.char-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(240px,1fr));
  gap:12px;
}
.char-card{
  background:var(--panel);
  border:1px solid var(--bd);
  border-radius:16px;
  padding:12px 12px 10px;
  display:flex;flex-direction:column;gap:6px;
}
.char-top{display:flex;gap:10px}
.avatar{
  width:46px;height:46px;border-radius:40%;
  background:radial-gradient(circle at 0% 0%, #ffd7a1,#ff9453);
  display:grid;place-items:center;
  font-weight:900;color:#23160d;font-size:18px;
}
.avatar.badge-news{background:radial-gradient(circle at 0% 0%, #ffe7a1,#ffc653);}
.avatar.badge-soft{background:radial-gradient(circle at 0% 0%, #c3f0ff,#4cb1ff);}
.char-meta{flex:1}
.char-name{font-weight:800;font-size:14px;margin-bottom:2px;display:flex;align-items:center;gap:6px}
.char-tags{font-size:11px;color:var(--muted)}
.char-tags span{margin-right:4px}
.char-body{font-size:12px;color:var(--muted);min-height:34px}
.char-actions{
  display:flex;align-items:center;justify-content:space-between;margin-top:4px;
}
.play-btn{
  border-radius:999px;border:1px solid var(--bd);
  width:32px;height:32px;display:grid;place-items:center;
  background:var(--field);cursor:pointer;font-size:14px;
}
.play-btn::before{content:"â–¶"}
.char-actions-right{display:flex;gap:6px}

/* ===== ìŠ¤íŠœë””ì˜¤(ë©”ì¸ í¸ì§‘ê¸°) ===== */
.studio-layout{
  display:grid;
  grid-template-columns:320px minmax(0,1fr);
  gap:16px;
}
.panel{
  background:var(--panel);
  border:1px solid var(--bd);
  border-radius:18px;
  padding:16px;
}
.panel-title{font-weight:800;font-size:15px;margin-bottom:10px}
.cap{display:block;font-weight:600;color:var(--muted);margin-bottom:6px;font-size:12px}
.group{margin-bottom:14px}
.menu-trigger{
  width:100%;display:flex;justify-content:space-between;align-items:center;
  padding:9px 11px;border-radius:10px;
  background:var(--field);border:1px solid var(--bd);
  color:var(--ink);font-size:13px;cursor:pointer;
}
.menu-trigger span:last-child{font-size:11px;color:var(--muted)}
.menu-panel{position:relative}
.menu-pop{
  position:absolute;top:6px;left:0;width:100%;
  background:var(--panel);border-radius:12px;
  border:1px solid var(--bd);box-shadow:0 20px 60px rgba(0,0,0,.5);
  padding:10px;display:none;z-index:40;
}
.menu-pop.show{display:block}
.menu-search{margin-bottom:8px}
.menu-grid{
  display:grid;grid-template-columns:repeat(2,minmax(0,1fr));
  gap:6px;max-height:220px;overflow:auto;
}
.menu-item{
  padding:8px 9px;border-radius:10px;
  background:var(--field);border:1px solid var(--bd);
  font-size:12px;cursor:pointer;
}
.menu-item.active{border-color:var(--brand);box-shadow:0 0 0 2px rgba(255,122,33,.28) inset}
.fav-row{display:flex;flex-wrap:wrap;gap:6px}
.fav{
  padding:7px 10px;border-radius:999px;
  border:1px solid var(--bd);background:var(--chip);
  font-size:12px;cursor:pointer;
}
.fav.active,.fav:hover{background:var(--chip-on)}
.preview-box{
  height:360px;border-radius:16px;
  border:1px dashed var(--bd);
  background:var(--preview);
  display:grid;place-items:center;
  color:var(--muted);font-size:13px;
  margin-bottom:10px;
}
.seg{display:flex;flex-wrap:wrap;gap:6px}
.seg .opt{
  padding:6px 10px;border-radius:999px;
  border:1px solid var(--bd);background:var(--chip);
  font-size:11px;cursor:pointer;
}
.seg .opt.active{background:var(--chip-on);border-color:var(--brand)}
.divider{height:1px;background:var(--bd);margin:10px 0}
code#promptOutput{
  display:block;white-space:pre-wrap;
  background:var(--code);border-radius:10px;
  border:1px solid var(--bd);
  padding:10px;font-size:12px;min-height:80px;
}
.row-inline{display:flex;gap:8px;align-items:center;margin-bottom:6px}

/* ===== ëª¨ë¸ ì„ íƒ ì „ì²´ ë³´ê¸° (ìºìŠ¤íŒ…) ===== */
.view-models .filters-layout{
  display:grid;
  grid-template-columns:260px minmax(0,1fr);
  gap:18px;
}
.filter-card{background:var(--panel);border-radius:18px;border:1px solid var(--bd);padding:14px}
.filter-card h3{margin:0 0 8px 0;font-size:15px}
.filter-section{margin-bottom:12px}
.filter-section h4{margin:0 0 4px 0;font-size:12px;color:var(--muted)}
.filter-list{display:flex;flex-direction:column;gap:4px;font-size:12px}
.filter-list label{display:flex;gap:6px;align-items:center;cursor:pointer}
.model-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}

/* ë§ˆì´í˜ì´ì§€ ë¯¸ë‹ˆ ë“œë¡­ë‹¤ìš´ */
.mypage{position:relative}
.mypage-btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 12px;border-radius:999px;
  border:1px solid var(--line);background:var(--btn-bg);
  cursor:pointer;font-size:13px;font-weight:800;
}
.mypage-avatar{
  width:22px;height:22px;border-radius:50%;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
}
.mypage-menu{
  position:absolute;right:0;top:calc(100% + 8px);
  min-width:200px;padding:6px;
  background:var(--panel);border-radius:12px;
  border:1px solid var(--bd);box-shadow:0 20px 60px rgba(0, 0, 0, 0.55);
  display:none;z-index:50;
}
.mypage-menu a{
  display:flex;align-items:center;gap:6px;
  padding:8px;border-radius:8px;
  font-size:13px;text-decoration:none;color:var(--ink);
}
.mypage-menu a:hover{background:var(--btn-bg)}
.mypage.open .mypage-menu{display:block}

/* ëª¨ë‹¬ (ë¡œê·¸ì¸/íšŒì›ê°€ì…) */
.modal{position:fixed;inset:0;display:none;place-items:center;z-index:1000}
.modal.show{display:grid}
.modal-backdrop{position:absolute;inset:0;background:rgb(255, 255, 255);backdrop-filter:blur(4px)}
.modal-card{
  position:relative;width:min(420px,94vw);max-height:92vh;
  background:var(--panel);border-radius:16px;
  border:1px solid var(--bd);box-shadow:0 28px 80px rgb(255, 255, 255);
  color:var(--ink);display:flex;flex-direction:column;
}
.modal-head{
  padding:14px 16px;border-bottom:1px solid var(--bd);
  display:flex;align-items:center;justify-content:space-between;gap:8px;
  background:var(--glass);
}
.modal-head h3{margin:0;font-size:16px}
.modal-body{padding:16px;overflow:auto}
.close-x{
  width:32px;height:32px;border-radius:10px;
  border:1px solid var(--line);background:var(--btn-bg);
  display:grid;place-items:center;cursor:pointer;
}
.field{margin-bottom:12px}
.label{display:block;font-size:12px;font-weight:700;color:var(--muted);margin-bottom:4px}
.error{color:#ff6b6b;font-size:11px;margin-top:4px;display:none}
.error.show{display:block}
.hint-sm{font-size:11px;color:var(--muted)}
.tabs{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:10px}
.tab{
  padding:5px 10px;border-radius:999px;
  border:1px solid var(--bd);background:var(--chip);
  font-size:11px;font-weight:700;color:var(--muted);
}
.tab.on{background:var(--chip-on);color:var(--ink);border-color:var(--brand)}
.consent-box{
  border-radius:10px;border:1px solid var(--bd);background:var(--field);
  padding:10px;max-height:220px;overflow:auto;font-size:12px;
}
.consent-line{display:flex;gap:8px;align-items:flex-start;padding:7px 4px;border-bottom:1px dashed var(--bd)}
.consent-line:last-child{border-bottom:none}

/* ë°˜ì‘í˜• */
@media (max-width:900px){
  .hero{grid-template-columns:1fr;gap:24px}
  .hero-preview-inner{height:220px}
  .feature-grid{grid-template-columns:1fr}
  .studio-layout{grid-template-columns:1fr}
  .view-models .filters-layout{grid-template-columns:1fr}
}
</style>
</head>
<body>
<input type="checkbox" id="themeSwitch" hidden>

<div class="page">
<header class="topbar">
  <div class="topbar-inner">
    <div style="display:flex;align-items:center;gap:10px">
      <div class="logo-wrap">
        <div class="svglogo">
          <svg viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
            <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#fff7e0"/><stop offset="1" stop-color="#ffe0b0"/></linearGradient></defs>
            <path d="M4 8 C10 2, 18 2, 24 8" stroke="rgba(0,0,0,.28)" stroke-width="4" stroke-linecap="round"/>
            <path d="M4 8 C10 2, 18 2, 24 8" stroke="url(#g)" stroke-width="3" stroke-linecap="round"/>
            <path d="M4 20 C10 26, 18 26, 24 20" stroke="rgba(0,0,0,.26)" stroke-width="4" stroke-linecap="round"/>
            <path d="M4 20 C10 26, 18 26, 24 20" stroke="url(#g)" stroke-width="3" stroke-linecap="round"/>
            <circle cx="10" cy="14" r="2.1" fill="#05050a"/>
            <circle cx="18" cy="14" r="2.1" fill="#05050a"/>
          </svg>
        </div>
        <div class="brand-name">mode l mode</div>
      </div>

      <nav class="main-nav">
        <button class="nav-link active" data-view="home">í™ˆ</button>
        <button class="nav-link" data-view="characters">ìºë¦­í„° ì¶”ì²œ</button>
        <button class="nav-link" data-view="studio">ìŠ¤íŠœë””ì˜¤</button>
        <button class="nav-link" data-view="models">ì „ì²´ ìºë¦­í„°</button>
      </nav>
    </div>

    <div class="topbar-right">
      <button class="authbtn" id="loginBtnTop">ë¡œê·¸ì¸</button>
      <button class="authbtn primary" id="signupBtnTop">íšŒì›ê°€ì…</button>
      <label for="themeSwitch" class="themebtn" title="ë¼ì´íŠ¸/ë‹¤í¬ ì „í™˜">
        <svg class="sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" fill="currentColor"/><g stroke="currentColor" stroke-width="1.4" stroke-linecap="round"><line x1="12" y1="1.8" x2="12" y2="4.2"/><line x1="12" y1="19.8" x2="12" y2="22.2"/><line x1="4.22" y1="4.22" x2="5.9" y2="5.9"/><line x1="18.1" y1="18.1" x2="19.78" y2="19.78"/><line x1="1.8" y1="12" x2="4.2" y2="12"/><line x1="19.8" y1="12" x2="22.2" y2="12"/><line x1="4.22" y1="19.78" x2="5.9" y2="18.1"/><line x1="18.1" y1="5.9" x2="19.78" y2="4.22"/></g></svg>
        <svg class="moon" viewBox="0 0 24 24"><path d="M21 13.1A8.5 8.5 0 0 1 11 3a.5.5 0 0 0-.6-.6A9.5 9.5 0 1 0 21.6 21.6a.5.5 0 0 0-.6-.6 8.5 8.5 0 0 1 0-7.9z" fill="currentColor"/></svg>
      </label>
    </div>
  </div>
</header>

<main class="shell">
  <!-- ===== HOME ===== -->
  <section id="view-home" class="view view-home active">
    <div class="container">
      <div class="hero">
        <div class="hero-copy">
          <p style="font-size:12px;color:var(--muted);margin:0 0 8px 0;">AI ëª¨ë¸ ìŠ¤íŠœë””ì˜¤ Â· í´ë¡œì¦ˆë“œ ë² íƒ€</p>
          <h1>ì´¬ì˜ ì—†ì´,<br><strong>ë£©ë¶Â·ì˜ìƒê¹Œì§€ í•œ ë²ˆì—.</strong></h1>
          <p>ëª¨ë¸, ìƒ· ì‚¬ì´ì¦ˆ, ì¹´ë©”ë¼ ì•µê¸€ê¹Œì§€. ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ê³ ë¥´ê³  í”„ë¡¬í”„íŠ¸ë§Œ ì¶”ê°€í•˜ë©´
            <b>10ë¶„ ì•ˆì— ì‹œì•ˆ</b>ì´ ì™„ì„±ë©ë‹ˆë‹¤.</p>
          <div class="hero-cta">
            <button class="btn primary" data-view-target="studio">ìŠ¤íŠœë””ì˜¤ ë°”ë¡œ ì—´ê¸°</button>
            <button class="btn soft" data-view-target="characters">ìºë¦­í„° ë¨¼ì € ë‘˜ëŸ¬ë³´ê¸°</button>
            <button class="btn" data-view-target="models">ì „ì²´ ìºë¦­í„° ë³´ê¸°</button>
          </div>
          <div class="hero-stats">
            <span class="hero-stat-pill">ìƒ· í”„ë¦¬ì…‹ 20+</span>
            <span class="hero-stat-pill">ì¹´ë©”ë¼ ë¬´ë¹™ 15+</span>
            <span class="hero-stat-pill">ë£©ë¶Â·ë¸Œëœë””ë“œÂ·ì»¤ë¨¸ìŠ¤ í…œí”Œë¦¿ ì œê³µ</span>
          </div>
        </div>
        <div class="hero-preview">
          <div class="hero-preview-inner">
            <div style="text-align:center">
              <div style="font-size:13px;margin-bottom:6px;">ì™¼ìª½ì˜ ì˜µì…˜ì„ ì„ íƒí•˜ë©´</div>
              <div style="font-size:16px;font-weight:800;margin-bottom:4px;">ì—¬ê¸°ì— ë¯¸ë¦¬ë³´ê¸°ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</div>
              <div style="font-size:11px;color:var(--muted)">ìŠ¤íŠœë””ì˜¤ì—ì„œ ì¹´ë©”ë¼ ì•µê¸€, ë¬´ë¹™, ëª¨ë¸ì„ ì¡°í•©í•´ ë³´ì„¸ìš”.</div>
            </div>
          </div>
        </div>
      </div>

      <section class="feature-grid" aria-label="ì£¼ìš” ê¸°ëŠ¥">
        <article class="feature-card">
          <div class="feature-tag">01 Â· ë£© ë””ë ‰ì…˜ í”„ë¦¬ì…‹</div>
          <h3>ìƒ· ì‚¬ì´ì¦ˆ & ì•µê¸€ì„ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ</h3>
          <p>ECUë¶€í„° í’€ìƒ·ê¹Œì§€, ì´¬ì˜ ê°ë…ë“¤ì´ ì“°ëŠ” ìš©ì–´ ê·¸ëŒ€ë¡œ ì •ë¦¬ëœ í”„ë¦¬ì…‹ìœ¼ë¡œ êµ¬ë„ë¥¼ ë¹ ë¥´ê²Œ ë§ì¶œ ìˆ˜ ìˆì–´ìš”.</p>
        </article>
        <article class="feature-card">
          <div class="feature-tag">02 Â· ì¹´ë©”ë¼ ë¬´ë¹™</div>
          <h3>íŒ¬, í‹¸íŠ¸, ëŒë¦¬ ì¸ê¹Œì§€ ìë™ ì• ë‹ˆë©”ì´ì…˜</h3>
          <p>ì •ì§€ ì»·ë¶€í„° ì˜¤ë¹„íƒˆ, í•¸ë“œí—¬ë“œê¹Œì§€. ì›í•˜ëŠ” ë¬´ë¹™ë§Œ ê³ ë¥´ë©´ ì•Œì•„ì„œ íƒ€ì„ë¼ì¸ì— ì ìš©ë©ë‹ˆë‹¤.</p>
        </article>
        <article class="feature-card">
          <div class="feature-tag">03 Â· ìºë¦­í„° ìŠ¤íŠœë””ì˜¤</div>
          <h3>ì—°ë ¹Â·ì„±ë³„ê³¼ ìƒê´€ì—†ì´, ì–¸ì œ ì–´ë””ì„œë‚˜ ëª¨ë¸ì„ í™œìš©í•´ ì½˜í…ì¸  ìƒì‚°</h3>
          <p>ì½˜ì…‰íŠ¸ì— ë§ëŠ” ìºë¦­í„°ë¥¼ ì¶”ì²œë°›ê³ , ìŠ¤íŠœë””ì˜¤ì—ì„œ ë°”ë¡œ ëª¨ë¸Â·í¬ì¦ˆÂ·ê°ì •ì„ ë°”ê¿”ë³´ì„¸ìš”.</p>
        </article>
      </section>
    </div>
  </section>

  <!-- ===== ìºë¦­í„° ì¶”ì²œ ===== -->
  <section id="view-characters" class="view view-characters">
    <div class="container">
      <div class="char-header">
        <div class="char-header-title">
          <h2>ì§€ê¸ˆ ë§ì´ ì“°ì´ëŠ” ìºë¦­í„°</h2>
          <p>ì‹œì‘í•  ë•Œ ê³ ë¯¼ëœë‹¤ë©´, ì•„ë˜ ìºë¦­í„°ë¡œ ë¨¼ì € í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ë³´ì„¸ìš”.</p>
        </div>
        <div class="char-filters">
          <div class="chip active" data-char-filter="all">ì „ì²´</div>
          <div class="chip" data-char-filter="news">ìºì£¼ì–¼</div>
          <div class="chip" data-char-filter="commerce">ì»¤ë¨¸ìŠ¤</div>
          <div class="chip" data-char-filter="casual">í™/ì˜¬ë“œíŒ¨ì…˜</div>
        </div>
      </div>

      <div class="char-search-row">
        <div class="char-search">
          <input id="charSearchInput" class="input" placeholder="ì´ë¦„ ë˜ëŠ” íƒœê·¸ë¡œ ê²€ìƒ‰ (ì˜ˆ: í™í•©, ë¹ˆí‹°ì§€, ë¹„ì¦ˆë‹ˆìŠ¤, ì˜¤í”¼ìŠ¤ë£©">
        </div>
        <div class="char-sort">
          <button class="chip" data-char-sort="popular">ì¸ê¸°ìˆœ</button>
          <button class="chip" data-char-sort="recent">ìµœê·¼ ì¶”ê°€</button>
        </div>
      </div>

      <div id="charGrid" class="char-grid"></div>
    </div>
  </section>

  <!-- ===== ìŠ¤íŠœë””ì˜¤ ===== -->
  <section id="view-studio" class="view view-studio">
    <div class="container">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px">
        <div>
          <h2 style="margin:0 0 4px 0;font-size:22px">ìŠ¤íŠœë””ì˜¤</h2>
          <p style="margin:0;font-size:13px;color:var(--muted)">ì›í•˜ëŠ” ëª¨ë¸, ìƒ·, ì¹´ë©”ë¼ ì„¤ì •ì„ ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ í”„ë¡¬í”„íŠ¸ê°€ ë“¤ì–´ê°€ìš”.</p>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn soft" data-view-target="characters">ì¶”ì²œ ìºë¦­í„° ë³´ê¸°</button>
          <button class="btn" data-view-target="models">ì „ì²´ ìºë¦­í„° ë³´ê¸°</button>
        </div>
      </div>

      <div class="studio-layout">
        <aside class="panel">
          <div class="panel-title">í”„ë¡œì íŠ¸ ì„¤ì •</div>

          <div class="group">
            <label class="cap">í”„ë¡œì íŠ¸ ì´ë¦„</label>
            <input id="projName" class="input" type="text" placeholder="ì˜ˆ: 2025 S/S ë£©ë¶ Aì„¸íŠ¸">
          </div>

          <div class="group">
            <label class="cap">ëª¨ë¸</label>
            <button class="menu-trigger" id="modelMenuBtn">
              <span><b id="modelCurrent">ë¯¼ì •</b></span>
              <span>ë³€ê²½ â–¾</span>
            </button>
            <div class="menu-panel">
              <div class="menu-pop" id="modelMenu">
                <div class="menu-search">
                  <input id="modelSearch" class="input" type="text" placeholder="ëª¨ë¸ ê²€ìƒ‰ (ì˜ˆ: ì§€ìˆ˜, ì¤€í˜¸...)">
                </div>
                <div id="modelGridMenu" class="menu-grid"></div>
              </div>
            </div>
            <div style="margin-top:8px">
              <span class="cap">ìì£¼ ì“°ëŠ” ëª¨ë¸</span>
              <div class="fav-row" id="favRow">
                <div class="fav" data-model="ë¯¼ì„œ">ë¯¼ì„œ</div>
                <div class="fav" data-model="ì§€ì˜">ì§€ì˜</div>
                <div class="fav" data-model="ìœ¤ì„­">ìœ¤ì„­</div>
                <div class="fav" data-model="ê²¨ë¡€">ê²¨ë¡€</div>
              </div>
              <button class="btn" style="margin-top:8px;width:100%;font-size:12px" data-view-target="models">
                ì „ì²´ ìºë¦­í„°ì—ì„œ ê³ ë¥´ê¸°
              </button>
            </div>
          </div>

          <div class="group">
            <label class="cap">ìƒ· ì‚¬ì´ì¦ˆ</label>
            <button class="menu-trigger" id="sizeMenuBtn">
              <span><b id="sizeCurrent">WS (Waist-up)</b></span>
              <span>í”„ë¦¬ì…‹ â–¾</span>
            </button>
            <div class="menu-panel">
              <div class="menu-pop" id="sizeMenu">
                <div class="menu-grid" id="sizeGrid"></div>
              </div>
            </div>
          </div>

          <div class="group">
            <label class="cap">ìƒí’ˆ</label>
            <button class="menu-trigger" id="productMenuBtn">
              <span><b id="productCurrent">ì´ë¯¸ì§€/ì„¤ëª… ì„¤ì •</b></span>
              <span>ì—…ë¡œë“œ â–¾</span>
            </button>
            <div class="menu-panel">
              <div class="menu-pop" id="productMenu">
                <div class="menu-search">
                  <input id="productDesc" class="input" type="text" placeholder="ì˜ˆ: beige trench coat, double-breasted, minimal">
                </div>
                <div style="display:flex;gap:10px;align-items:flex-start">
                  <div style="flex:1">
                    <label class="cap">ìƒí’ˆ ì´ë¯¸ì§€ ì—…ë¡œë“œ</label>
                    <input id="productImage" type="file" accept="image/*" class="input">
                    <div class="hint-sm" style="margin-top:6px">PNG/JPG 10MB ì´í•˜ Â· ë°°ê²½ ìë™ ì œê±° ì˜ˆì •</div>
                  </div>
                  <div id="productThumb" style="width:130px;height:100px;border-radius:10px;border:1px dashed var(--bd);display:grid;place-items:center;background:var(--preview);font-size:11px;color:var(--muted)">IMAGE</div>
                </div>
              </div>
            </div>
          </div>

          <div class="group">
            <label class="cap">í¬ì¦ˆ</label>
            <button class="menu-trigger" id="poseMenuBtn">
              <span><b id="poseCurrent">ì„œê¸°</b></span>
              <span>í¬ì¦ˆ ì„ íƒ â–¾</span>
            </button>
            <div class="menu-panel">
              <div class="menu-pop" id="poseMenu">
                <div class="menu-search">
                  <input id="poseSearch" class="input" type="text" placeholder="ì˜ˆ: ì„œê¸°, íŒ”ì§±, ì† ì£¼ë¨¸ë‹ˆ">
                </div>
                <div class="menu-grid" id="poseGrid"></div>
              </div>
            </div>
          </div>

          <div class="group">
            <label class="cap">ê°ì •</label>
            <button class="menu-trigger" id="emoMenuBtn">
              <span><b id="emoCurrent">ë°ìŒ</b></span>
              <span>ë¬´ë“œ ì„ íƒ â–¾</span>
            </button>
            <div class="menu-panel">
              <div class="menu-pop" id="emoMenu">
                <div class="menu-search">
                  <input id="emoSearch" class="input" type="text" placeholder="ì˜ˆ: ë°ìŒ, ì§„ì§€, ì‹œí¬">
                </div>
                <div class="menu-grid" id="emoGrid"></div>
              </div>
            </div>
          </div>

          <div class="group">
            <label class="cap">ì¹´ë©”ë¼ ì•µê¸€</label>
            <button class="menu-trigger" id="angleMenuBtn">
              <span><b id="angleCurrent">ì•„ì´ë ˆë²¨</b></span>
              <span>í”„ë¦¬ì…‹ â–¾</span>
            </button>
            <div class="menu-panel">
              <div class="menu-pop" id="angleMenu">
                <div class="menu-search">
                  <input id="angleSearch" class="input" type="text" placeholder="ì˜ˆ: ì•„ì´ë ˆë²¨, í•˜ì´, ë¡œìš°">
                </div>
                <div class="menu-grid" id="angleGrid"></div>
                <div class="divider"></div>
                <div id="angleMini" style="height:110px;border-radius:10px;border:1px dashed var(--bd);display:grid;place-items:center;background:var(--preview);font-size:11px;color:var(--muted)">ANGLE</div>
                <div style="margin-top:8px">
                  <label class="cap">ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ (ì„ íƒ)</label>
                  <input id="angleImage" type="file" accept="image/*" class="input">
                </div>
              </div>
            </div>
          </div>

          <div class="group">
            <label class="cap">ì¹´ë©”ë¼ ë¬´ë¹™</label>
            <button class="menu-trigger" id="moveMenuBtn">
              <span><b id="moveCurrent">Static</b></span>
              <span>ë¬´ë¹™ ì„ íƒ â–¾</span>
            </button>
            <div class="menu-panel">
              <div class="menu-pop" id="moveMenu">
                <div class="menu-search">
                  <div class="seg" id="moveCats">
                    <div class="opt active" data-cat="linear">Linear</div>
                    <div class="opt" data-cat="rotation">Rotation</div>
                    <div class="opt" data-cat="vertical">Vertical</div>
                    <div class="opt" data-cat="complex">Complex</div>
                  </div>
                </div>
                <div class="menu-grid" id="moveGrid"></div>
                <div class="divider"></div>
                <div id="moveMini" style="height:90px;border-radius:10px;border:1px dashed var(--bd);display:grid;place-items:center;background:var(--preview);font-size:11px;color:var(--muted)">MOVEMENT</div>
              </div>
            </div>
          </div>

          <div class="group">
            <label class="cap">ì¶”ê°€ ì„¤ëª… (ì˜µì…˜)</label>
            <input id="extraDesc" class="input" type="text" placeholder="ì˜ˆ: studio lighting, white background, sharp focus">
          </div>
        </aside>

        <section class="panel">
          <div class="panel-title">í”„ë¦¬ë·° & í”„ë¡¬í”„íŠ¸</div>
          <div id="previewBox" class="preview-box">PREVIEW</div>

          <div class="group">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:4px">
              <label class="cap">í”„ë¡¬í”„íŠ¸</label>
              <button class="btn" id="togglePrompt" style="padding:4px 10px;font-size:11px;background:var(--chip)">ì ‘ê¸°/í¼ì¹˜ê¸°</button>
            </div>
            <div class="row-inline">
              <input id="promptInput" class="input" type="text" placeholder="ì¶”ê°€ë¡œ ì„¤ëª…í•  ë‚´ìš©ì„ ì…ë ¥í•˜ê±°ë‚˜ ìŒì„±ìœ¼ë¡œ ë§í•˜ì„¸ìš”. Enterë¡œ ì ìš©">
              <button class="btn" id="promptEnter" style="padding-inline:12px;font-size:12px">Enter</button>
              <button class="btn" id="promptMic" style="padding-inline:10px;font-size:13px" title="ìŒì„± ì…ë ¥" aria-label="ìŒì„± ì…ë ¥">ğŸ¤</button>
            </div>
            <code id="promptOutput"></code>
          </div>
        </section>
      </div>
    </div>
  </section>

  <!-- ===== ì „ì²´ ìºë¦­í„° (ìºìŠ¤íŒ…) ===== -->
  <section id="view-models" class="view view-models">
    <div class="container">
      <div style="display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:16px">
        <div>
          <h2 style="margin:0 0 4px 0;font-size:22px">ìºë¦­í„° ìºìŠ¤íŒ…</h2>
          <p style="margin:0;font-size:13px;color:var(--muted)">ì–¸ì–´, ì„±ë³„, ìŠ¤íƒ€ì¼ í•„í„°ë¡œ ì›í•˜ëŠ” ìºë¦­í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆì–´ìš”.</p>
        </div>
        <button class="btn soft" data-view-target="studio" id="btnBackToStudioFromModels">ì„ íƒ í›„ ìŠ¤íŠœë””ì˜¤ë¡œ</button>
      </div>

      <div class="filters-layout">
        <aside class="filter-card">
          <h3>í•„í„°</h3>

          <div class="filter-section">
            <h4>ì–¸ì–´</h4>
            <div class="filter-list">
              <label><input type="checkbox" class="mdl-filter-lang" value="ko" checked> í•œêµ­ì–´</label>
              <label><input type="checkbox" class="mdl-filter-lang" value="en"> ì˜ì–´</label>
              <label><input type="checkbox" class="mdl-filter-lang" value="jp"> ì¼ë³¸ì–´</label>
            </div>
          </div>

          <div class="filter-section">
            <h4>í†¤ & ì—­í• </h4>
            <div class="filter-list">
              <label><input type="checkbox" class="mdl-filter-role" value="news"> 20ëŒ€/í™í•©</label>
              <label><input type="checkbox" class="mdl-filter-role" value="commerce"> 30ëŒ€/ì˜¤í”¼ìŠ¤ë£©Â·ë¹„ì¦ˆë‹ˆìŠ¤ë£©</label>
              <label><input type="checkbox" class="mdl-filter-role" value="casual"> 40ëŒ€/ì˜í¬í‹°</label>
            </div>
          </div>

          <div class="filter-section">
            <h4>ì„±ë³„</h4>
            <div class="filter-list">
              <label><input type="checkbox" class="mdl-filter-gender" value="f" checked> ì—¬ì„±</label>
              <label><input type="checkbox" class="mdl-filter-gender" value="m" checked> ë‚¨ì„±</label>
            </div>
          </div>

          <div class="filter-section">
            <h4>ì •ë ¬</h4>
            <div class="filter-list">
              <label><input type="radio" name="mdlSort" value="popular" checked> ì¸ê¸°ìˆœ</label>
              <label><input type="radio" name="mdlSort" value="new"> ìµœì‹ ìˆœ</label>
            </div>
          </div>
        </aside>

        <div>
          <div style="display:flex;gap:10px;margin-bottom:10px;align-items:center;flex-wrap:wrap">
            <input id="mdlSearchInput" class="input" placeholder="ìºë¦­í„° ì´ë¦„ ë˜ëŠ” íƒœê·¸ ê²€ìƒ‰">
            <div style="font-size:12px;color:var(--muted)">ì„ íƒ í›„ ì¹´ë“œì˜ <b>â€œìŠ¤íŠœë””ì˜¤ì—ì„œ ì‚¬ìš©â€</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
          </div>
          <div id="modelGridAll" class="model-grid"></div>
        </div>
      </div>
    </div>
  </section>
</main>
</div>

<!-- ===== ë¡œê·¸ì¸ ëª¨ë‹¬ ===== -->
<div id="loginModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
  <div class="modal-backdrop" data-close="loginModal"></div>
  <div class="modal-card">
    <div class="modal-head">
      <h3 id="loginTitle">ë¡œê·¸ì¸</h3>
      <button class="close-x" data-close="loginModal" aria-label="ë‹«ê¸°">âœ•</button>
    </div>
    <div class="modal-body">
      <p class="hint-sm" style="margin:0 0 12px 0">ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•©ë‹ˆë‹¤. (ë°ëª¨: ì„œë²„ ì—†ì´ ë™ì‘)</p>
      <div class="field">
        <label class="label" for="loginEmail">ì´ë©”ì¼</label>
        <input id="loginEmail" class="input" type="email" placeholder="name@example.com" autocomplete="username">
        <div id="loginEmailErr" class="error">ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
      </div>
      <div class="field">
        <label class="label" for="loginPw">ë¹„ë°€ë²ˆí˜¸</label>
        <input id="loginPw" class="input" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" autocomplete="current-password">
        <div id="loginPwErr" class="error">ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
      </div>
      <div class="field">
        <button id="loginSubmit" class="btn primary" style="width:100%">ë¡œê·¸ì¸</button>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center">
        <span class="hint-sm"><a href="#" id="openReset">ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</a></span>
        <span class="hint-sm">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="#" id="openSignupFromLogin">íšŒì›ê°€ì…</a></span>
      </div>
    </div>
  </div>
</div>

<!-- ===== íšŒì›ê°€ì… ëª¨ë‹¬ ===== -->
<div id="signupModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="signupTitle">
  <div class="modal-backdrop" data-close="signupModal"></div>
  <div class="modal-card">
    <div class="modal-head">
      <h3 id="signupTitle">íšŒì›ê°€ì…</h3>
      <button class="close-x" data-close="signupModal" aria-label="ë‹«ê¸°">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="tabs">
        <div class="tab on" data-step="1">ì´ë©”ì¼</div>
        <div class="tab" data-step="2">ì¸ì¦</div>
        <div class="tab" data-step="3">ë¹„ë°€ë²ˆí˜¸</div>
        <div class="tab" data-step="4">ë™ì˜</div>
        <div class="tab" data-step="5">ì™„ë£Œ</div>
      </div>

      <!-- step1 -->
      <section id="st1">
        <div class="field">
          <label class="label" for="s1name">ì´ë¦„</label>
          <input id="s1name" class="input" type="text" placeholder="í™ê¸¸ë™">
          <div id="s1nameErr" class="error">ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
        </div>
        <div class="field">
          <label class="label" for="s1e">ì´ë©”ì¼</label>
          <input id="s1e" class="input" type="email" placeholder="name@example.com" autocomplete="email">
          <div id="s1err" class="error">ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
        </div>
        <button id="s1next" class="btn primary" style="width:100%">ê³„ì†</button>
      </section>

      <!-- step2 -->
      <section id="st2" style="display:none">
        <div class="field">
          <label class="label" for="s2c">ì´ë©”ì¼ë¡œ ì „ì†¡ëœ ì¸ì¦ì½”ë“œ</label>
          <input id="s2c" class="input" type="text" placeholder="6ìë¦¬ ì½”ë“œ" maxlength="6" inputmode="numeric">
          <div id="s2err" class="error">ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•Šê±°ë‚˜ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. (ë°ëª¨ë¼ ì„ì˜ 6ìë¦¬ë©´ í†µê³¼)</div>
          <div class="hint-sm">ì½”ë“œ ìœ íš¨ì‹œê°„ 10ë¶„ Â· ì¬ì „ì†¡ì€ 30ì´ˆë§ˆë‹¤ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
        </div>
        <div class="field" style="display:flex;gap:8px">
          <button id="s2resend" class="btn" style="flex:1">ì½”ë“œ ì¬ì „ì†¡</button>
          <button id="s2next" class="btn primary" style="flex:1">ë‹¤ìŒ</button>
        </div>
      </section>

      <!-- step3 -->
      <section id="st3" style="display:none">
        <div class="field">
          <label class="label" for="s3p1">ë¹„ë°€ë²ˆí˜¸</label>
          <input id="s3p1" class="input" type="password" placeholder="ì˜ë¬¸ ëŒ€/ì†Œ, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì í¬í•¨ 8ì ì´ìƒ">
        </div>
        <div class="field">
          <label class="label" for="s3p2">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
          <input id="s3p2" class="input" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥">
          <div id="s3err" class="error">ë¹„ë°€ë²ˆí˜¸ ì •ì±… ë¯¸ì¶©ì¡± ë˜ëŠ” ë¶ˆì¼ì¹˜</div>
        </div>
        <button id="s3next" class="btn primary" style="width:100%">ë‹¤ìŒ</button>
      </section>

      <!-- step4 -->
      <section id="st4" style="display:none">
        <div class="consent-box">
          <div class="consent-line">
            <input type="checkbox" id="c_tos" style="margin-top:3px">
            <div>
              <b>[í•„ìˆ˜] ì´ìš©ì•½ê´€ ë™ì˜</b>
              <details class="hint-sm"><summary>ì „ë¬¸ ë³´ê¸°</summary>
                <p>ì „ììƒê±°ë˜ë²•Â·ì •ë³´í†µì‹ ë§ë²•Â·ê°œì¸ì •ë³´ë³´í˜¸ë²•ì„ ì¤€ìˆ˜í•˜ë©°, íšŒì› ë° íšŒì‚¬ì˜ ê¶Œë¦¬Â·ì˜ë¬´, ì„œë¹„ìŠ¤ ì´ìš© ì¡°ê±´, ê³„ì•½ í•´ì§€, ë¶„ìŸ í•´ê²° ì ˆì°¨ ë“±ì„ ê·œì •í•©ë‹ˆë‹¤.</p>
              </details>
            </div>
          </div>
          <div class="consent-line">
            <input type="checkbox" id="c_privacy" style="margin-top:3px">
            <div>
              <b>[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜</b>
              <details class="hint-sm"><summary>ìš”ì•½ ë³´ê¸°</summary>
                <p><b>ìˆ˜ì§‘ í•­ëª©</b> : ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸(í•´ì‹œ), ë‹‰ë„¤ì„(ì„ íƒ), ì ‘ì†ê¸°ë¡/ì¿ í‚¤, ê²°ì œì •ë³´(ê²°ì œ ì‹œ)</p>
                <p><b>ì´ìš© ëª©ì </b> : íšŒì› ì‹ë³„Â·ê´€ë¦¬, ì„œë¹„ìŠ¤ ì œê³µ, ê²°ì œ/ì •ì‚°, ë¶€ì • ì´ìš© ë°©ì§€, ê³ ê°ì§€ì›, ì•Œë¦¼ ë°œì†¡</p>
                <p><b>ë³´ìœ  ê¸°ê°„</b> : íƒˆí‡´ ì‹œ ì§€ì²´ ì—†ì´ íŒŒê¸° (ê´€ë ¨ ë²•ë ¹ì— ë”°ë¥¸ ì˜ˆì™¸ ë³´ê´€ í¬í•¨)</p>
              </details>
            </div>
          </div>
          <div class="consent-line">
            <input type="checkbox" id="c_age" style="margin-top:3px">
            <div><b>[í•„ìˆ˜] ë§Œ 14ì„¸ ì´ìƒì…ë‹ˆë‹¤</b></div>
          </div>
          <div class="consent-line">
            <input type="checkbox" id="c_mkt_email" style="margin-top:3px">
            <div><b>[ì„ íƒ] ê´‘ê³ ì„± ì •ë³´ ìˆ˜ì‹  ë™ì˜(ì´ë©”ì¼)</b></div>
          </div>
          <div class="consent-line">
            <input type="checkbox" id="c_mkt_sms" style="margin-top:3px">
            <div><b>[ì„ íƒ] ê´‘ê³ ì„± ì •ë³´ ìˆ˜ì‹  ë™ì˜(SMS)</b></div>
          </div>
          <div class="consent-line">
            <input type="checkbox" id="c_xfer" style="margin-top:3px">
            <div>
              <b>[ì„ íƒ] êµ­ì™¸ ì´ì „ ë™ì˜(í•´ì™¸ ì„œë²„/3rd-party API ì‚¬ìš© ì‹œ)</b>
              <details class="hint-sm"><summary>ìƒì„¸ ë³´ê¸°</summary>
                <p>ì˜ˆ: Google, OpenAI, AWS ë“± í•´ì™¸ ìˆ˜íƒì‚¬ì— AI ì²˜ë¦¬ ë° ì¸í”„ë¼ ìš´ì˜ì„ ìœ„íƒí•  ìˆ˜ ìˆìœ¼ë©°, í•„ìš”í•œ ìµœì†Œ ì •ë³´ë§Œ ì „ì†¡í•©ë‹ˆë‹¤.</p>
              </details>
            </div>
          </div>
        </div>
        <div id="cErr" class="error">[í•„ìˆ˜] í•­ëª©(ì´ìš©ì•½ê´€/ê°œì¸ì •ë³´/ë§Œ14ì„¸)ì„ ëª¨ë‘ ë™ì˜í•´ ì£¼ì„¸ìš”.</div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
          <label class="hint-sm"><input type="checkbox" id="c_all"> ì „ì²´ ë™ì˜</label>
          <button id="s4next" class="btn primary">ë™ì˜í•˜ê³  ê°€ì…</button>
        </div>
      </section>

      <!-- step5 -->
      <section id="st5" style="display:none">
        <p><b>ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</b><br>Modemode.aiì— ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤. (ë°ëª¨)</p>
        <button class="btn primary" id="toLogin" style="width:100%">ë¡œê·¸ì¸í•˜ëŸ¬ ê°€ê¸°</button>
      </section>
    </div>
  </div>
</div>

<script>
/* ===== SPA ë¼ìš°í„° (ë’¤ë¡œê°€ê¸° ì§€ì›: hash ê¸°ë°˜) ===== */
const views = {
  home: document.getElementById('view-home'),
  characters: document.getElementById('view-characters'),
  studio: document.getElementById('view-studio'),
  models: document.getElementById('view-models')
};
function setActiveView(name){
  Object.values(views).forEach(v=> v && v.classList.remove('active'));
  if(views[name]) views[name].classList.add('active');
  document.querySelectorAll('.nav-link').forEach(btn=>{
    btn.classList.toggle('active', btn.dataset.view === name);
  });
  window.scrollTo({top:0,behavior:'instant'});
}
function syncViewWithHash(){
  const raw = (location.hash || '#home').replace('#','');
  const name = views[raw] ? raw : 'home';
  setActiveView(name);
}
document.querySelectorAll('[data-view]').forEach(btn=>{
  btn.addEventListener('click', e=>{
    e.preventDefault();
    const target = btn.dataset.view;
    location.hash = target;
  });
});
document.querySelectorAll('[data-view-target]').forEach(btn=>{
  btn.addEventListener('click', e=>{
    e.preventDefault();
    const target = btn.dataset.viewTarget;
    location.hash = target;
  });
});
window.addEventListener('hashchange', syncViewWithHash);
syncViewWithHash();

/* ===== ë°ì´í„°ì…‹ ===== */
const CHARACTER_LIST = [
  {
    id: 'runway_hera',
    name: 'í—¤ë¼ ëŸ°ì›¨ì´',
    tag: '#í•˜ì´íŒ¨ì…˜/ìº í˜ì¸',
    mood: 'ê°•ë ¬Â·ì‹œí¬',
    lang: 'ko',
    role: 'news',
    gender: 'f',
    img: 'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400',
    highlight: 'í•˜ì´ì—”ë“œ íŒ¨ì…˜ ë¸Œëœë“œ ìº í˜ì¸ì— ì–´ìš¸ë¦¬ëŠ” ëŸ°ì›¨ì´ ë¬´ë“œì˜ AI ëª¨ë¸ì…ë‹ˆë‹¤.'
  },
  {
    id: 'lookbook_jisoo',
    name: 'ì§€ìˆ˜ ë£©ë¶',
    tag: '#ë£©ë¶/ë°ì¼ë¦¬',
    mood: 'ë„ì‹œÂ·ëª¨ë˜',
    lang: 'ko',
    role: 'commerce',
    gender: 'f',
    img: 'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400',
    highlight: 'ì˜¨ë¼ì¸ ìŠ¤í† ì–´ìš© ì „ì‹  ë£©ë¶, ë°ì¼ë¦¬ ì½”ë”” ì†Œê°œì— ìµœì í™”ëœ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.'
  },
  {
    id: 'street_minjun',
    name: 'ë¯¼ì¤€ ìŠ¤íŠ¸ë¦¿',
    tag: '#ìŠ¤íŠ¸ë¦¿/ìºì£¼ì–¼',
    mood: 'ììœ ë¡­ê³  ì¿¨í•¨',
    lang: 'ko',
    role: 'casual',
    gender: 'm',
    img: 'https://images.unsplash.com/photo-1520975918319-894d3c1a8d5e?w=400',
    highlight: 'ìŠ¤ë‹ˆì»¤ì¦ˆ, ë°ë‹˜, ì•„ìš°í„° ë“± ìŠ¤íŠ¸ë¦¿ ë£©ê³¼ ë¼ì´í”„ìŠ¤íƒ€ì¼ ì»¨í…ì¸ ì— ì–´ìš¸ë¦¬ëŠ” ëª¨ë¸ì…ë‹ˆë‹¤.'
  },
  {
    id: 'studio_hana',
    name: 'í•˜ë‚˜ ìŠ¤íŠœë””ì˜¤',
    tag: '#ì‹¬í”Œ/ìŠ¤íŠœë””ì˜¤',
    mood: 'ë‹´ë°±Â·ë‹¨ì •',
    lang: 'ko',
    role: 'commerce',
    gender: 'f',
    img: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400',
    highlight: 'ë¬´ì§€ ë°°ê²½ì—ì„œ ì œí’ˆì„ ê¹”ë”í•˜ê²Œ ë³´ì—¬ì£¼ëŠ” ì „ì‹  ìŠ¤íŠœë””ì˜¤ ëª¨ë¸ì…ë‹ˆë‹¤.'
  },
  {
    id: 'sport_sena',
    name: 'ì„¸ë‚˜ ì• ìŠ¬ë ˆì €',
    tag: '#ìŠ¤í¬ì¸ /ì• ìŠ¬ë ˆì €',
    mood: 'ì—ë„ˆì§€Â·í™œë™ì ',
    lang: 'ko',
    role: 'casual',
    gender: 'f',
    img: 'https://images.unsplash.com/photo-1544717305-996b815c338c?w=400',
    highlight: 'ìš”ê°€, ëŸ¬ë‹, í—¬ìŠ¤ ë“± ì•¡í‹°ë¸Œí•œ í¬ì¦ˆê°€ ë§ì€ í™”ë³´ì— ì í•©í•©ë‹ˆë‹¤.'
  },
  {
    id: 'minimal_jiho',
    name: 'ì§€í˜¸ ë¯¸ë‹ˆë©€',
    tag: '#ëª¨ë˜/ì˜¤í”¼ìŠ¤',
    mood: 'ì°¨ë¶„Â·ì„¸ë ¨',
    lang: 'ko',
    role: 'commerce',
    gender: 'm',
    img: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400',
    highlight: 'ì…”ì¸ , ìˆ˜íŠ¸ ë“± ë¯¸ë‹ˆë©€í•œ ì˜¤í”¼ìŠ¤ë£©Â·ë¹„ì¦ˆë‹ˆìŠ¤ë£© í™”ë³´ì— ì–´ìš¸ë¦¬ëŠ” ëª¨ë¸ì…ë‹ˆë‹¤.'
  },
  {
    id: 'street_harin',
    name: 'í•˜ë¦° ìŠ¤íŠ¸ë¦¿',
    tag: '#ìºì£¼ì–¼/ë¹ˆí‹°ì§€',
    mood: 'ë°ìŒÂ·ê°ê°ì ',
    lang: 'ko',
    role: 'casual',
    gender: 'f',
    img: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400',
    highlight: 'ë¹ˆí‹°ì§€í•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´ ìºì£¼ì–¼ ë£©, Zì„¸ëŒ€ ê°ì„±ì˜ ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œìš© ì»·ì— ì–´ìš¸ë¦½ë‹ˆë‹¤.'
  },
  {
    id: 'runway_taehyun',
    name: 'íƒœí˜„ ëŸ°ì›¨ì´',
    tag: '#í•˜ì´íŒ¨ì…˜/ë‚¨ì„±',
    mood: 'ê°•ë ¬Â·ëª¨ë˜',
    lang: 'ko',
    role: 'news',
    gender: 'm',
    img: 'https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=400',
    highlight: 'ëŸ°ì›¨ì´, í™”ë³´, ìº í˜ì¸ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ë‚¨ì„± ëª¨ë¸ì…ë‹ˆë‹¤.'
  },
  {
    id: 'classic_yuna',
    name: 'ìœ ë‚˜ í´ë˜ì‹',
    tag: '#í´ë˜ì‹/ëª¨ë˜',
    mood: 'ì„¸ë ¨Â·ê³ ê¸‰',
    lang: 'ko',
    role: 'commerce',
    gender: 'f',
    img: 'https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=400',
    highlight: 'ëŸ­ì…”ë¦¬ ë¸Œëœë“œ ë£©ë¶, íŒ¨ì…˜ ë§¤ê±°ì§„ í™”ë³´ì— ì–´ìš¸ë¦¬ëŠ” ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.'
  },
  {
    id: 'global_luca',
    name: 'Luca Global',
    tag: '#Global/Runway',
    mood: 'SharpÂ·Cool',
    lang: 'en',
    role: 'news',
    gender: 'm',
    img: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400',
    highlight: 'í•´ì™¸ ë¸Œëœë“œ ìº í˜ì¸ê³¼ ê¸€ë¡œë²Œ ëŸ°ì›¨ì´ì— ì–´ìš¸ë¦¬ëŠ” AI ëª¨ë¸ì…ë‹ˆë‹¤.'
  },
  {
    id: 'editorial_chloe',
    name: 'ChloÃ© Editorial',
    tag: '#Editorial/Paris',
    mood: 'NeutralÂ·Elegant',
    lang: 'en',
    role: 'commerce',
    gender: 'f',
    img: 'https://images.unsplash.com/photo-1533577116850-9cc66cad8a9b?w=400',
    highlight: 'íŒ¨ì…˜ì§€, ê´‘ê³  ì»·ì— ì í•©í•œ ì—ë””í† ë¦¬ì–¼ ë¬´ë“œì˜ ê¸€ë¡œë²Œ ëª¨ë¸ì…ë‹ˆë‹¤.'
  },
  {
    id: 'retro_jun',
    name: 'ì¤€ ë¹ˆí‹°ì§€',
    tag: '#ë ˆíŠ¸ë¡œ/í´ë˜ì‹',
    mood: 'ê°ì„±Â·ìì—°ìŠ¤ëŸ¬ì›€',
    lang: 'ko',
    role: 'casual',
    gender: 'm',
    img: 'https://images.unsplash.com/photo-1506084868230-bb9d95c24759?w=400',
    highlight: 'í•„ë¦„ ê°ì„±, ë¹ˆí‹°ì§€ ë¸Œëœë“œ ë£©ë¶ì´ë‚˜ ì˜¤í”„ë¼ì¸ í¬ìŠ¤í„°ì— ì–´ìš¸ë¦½ë‹ˆë‹¤.'
  }
];

const MODEL_NAMES = ["ë¯¼ì •","ì§€ì€","ìƒì§„","ì£¼ì„","ë³‘ì§„","ìƒì‹","ì€ì„œ","ì§€ë¯¼","ìœ¤ì •","ì§€ìˆ˜","íƒœí˜„","ì„œìœ¤","ë„ìœ¤","í•˜ë¦°","ì˜ˆë¦°"];
const SIZE_ITEMS = [
  {label:"ECU (Extreme Close-Up)", key:"ECU"},
  {label:"CU (Close-Up)", key:"CU"},
  {label:"BS (Bust Shot)", key:"BS"},
  {label:"WS (Waist-up)", key:"WS"},
  {label:"KS (Knee-up)", key:"KS"},
  {label:"FS (Full Shot)", key:"FS"}
];
const POSE_ITEMS = ["ì„œê¸°","ì•‰ê¸°","ê±·ê¸°","ë¬´ë¦ê¿‡ê¸°","ëˆ•ê¸°","ê¸°ëŒ€ê¸°","ì í”„","í„´(ëŒê¸°)","ì† ì£¼ë¨¸ë‹ˆ","íŒ”ì§± ë¼ê¸°","ì–´ê¹¨ ë„˜ê¸°ê¸°","ë°”ë‹¥ì— ì•‰ê¸°"];
const EMO_ITEMS  = ["ë°ìŒ","ì°¨ë¶„","ë¶€ë“œëŸ¬ì›€","ìì‹ ê°","ì‹œí¬","ë¯¸ì†Œ","ì§„ì§€","ê°•ë ¬","ë¶„ë…¸","ìŠ¬í””","ì¦ê±°ì›€"];
const ANGLE_ITEMS = [
  {ko:"ì•„ì´ë ˆë²¨", key:"eye"},
  {ko:"í•˜ì´ ì•µê¸€", key:"high"},
  {ko:"ë¡œìš° ì•µê¸€", key:"low"},
  {ko:"ì •ë©´",     key:"front"},
  {ko:"ì¸¡ë©´",     key:"side"},
  {ko:"ì˜¤ë²„ìˆ„ë”", key:"overShoulder"},
  {ko:"íƒ‘ë·°",     key:"top"},
  {ko:"ë°”ë‹¥ìƒ·",   key:"ground"},
  {ko:"ë”ì¹˜(í‹¸íŠ¸)",key:"dutch"}
];
const MOVE_GROUPS = {
  linear:   ["Static","Dolly In","Dolly Out","Dolly Left","Dolly Right","Truck Left","Truck Right","Crane In","Crane Out"],
  rotation: ["Pan Left","Pan Right","Tilt Up","Tilt Down","Roll CW","Roll CCW","Orbit CW","Orbit CCW"],
  vertical: ["Pedestal Up","Pedestal Down","Crane Up","Crane Down"],
  complex:  ["Zoom In","Zoom Out","Handheld","Steadicam","Rack Focus"]
};

/* ===== API ì—°ë™ (ë°±ì—”ë“œ) ===== */
/* ì§€ê¸ˆ ë§Œë“  server.js ê¸°ì¤€:
   POST /api/generate-image
   POST /api/generate-video
*/
const API_BASE = 'http://localhost:3000';
const API = {
  image: API_BASE + '/api/generate-image',
  video: API_BASE + '/api/generate-video'
};

function toast(msg){
  let el = document.getElementById('mlm-toast');
  if(!el){
    el = document.createElement('div');
    el.id='mlm-toast';
    el.style.position='fixed';
    el.style.right='16px';
    el.style.bottom='16px';
    el.style.padding='10px 14px';
    el.style.borderRadius='10px';
    el.style.border='1px solid var(--bd)';
    el.style.background='var(--panel)';
    el.style.color='var(--ink)';
    el.style.fontSize='12px';
    el.style.zIndex='99999';
    el.style.boxShadow='0 16px 40px rgba(0,0,0,.55)';
    document.body.appendChild(el);
  }
  el.textContent = msg;
  el.style.opacity='1';
  el.style.display='block';
  clearTimeout(el._timer);
  el._timer = setTimeout(()=>{ el.style.opacity='0'; }, 2200);
}

/* ===== ìºë¦­í„° ì¹´ë“œ ë Œë”ë§ ===== */
function makeCharCard(char, small){
  const div = document.createElement('article');
  div.className = 'char-card';
  div.dataset.id = char.id;
  div.dataset.role = char.role;
  div.dataset.lang = char.lang;
  div.dataset.gender = char.gender;

  const top = document.createElement('div');
  top.className = 'char-top';

  const av = document.createElement('div');
  av.className = 'avatar ' + (char.role === 'news' ? 'badge-news' : (char.role==='casual' ? 'badge-soft' : ''));
  av.textContent = char.name[0];
  top.appendChild(av);

  const meta = document.createElement('div');
  meta.className = 'char-meta';
  const nm = document.createElement('div');
  nm.className = 'char-name';
  nm.textContent = char.name;
  const tag = document.createElement('span');
  tag.style.fontSize = '11px';
  tag.style.color = 'var(--muted)';
  tag.textContent = char.tag;
  nm.appendChild(tag);
  const mood = document.createElement('div');
  mood.className = 'char-tags';
  mood.innerHTML = `<span>${char.mood}</span><span>Â· ${char.lang.toUpperCase()}</span>`;
  meta.appendChild(nm);
  meta.appendChild(mood);
  top.appendChild(meta);
  div.appendChild(top);

  const body = document.createElement('div');
  body.className = 'char-body';
  body.textContent = char.highlight;
  div.appendChild(body);

  const act = document.createElement('div');
  act.className = 'char-actions';
  const play = document.createElement('button');
  play.className = 'play-btn';
  play.type = 'button';
  play.title = 'ìƒ˜í”Œ ë³´ê¸° (ë°ëª¨)';
  play.addEventListener('click', ()=>{
    alert('ë°ëª¨: "'+char.name+'" ìºë¦­í„° ìƒ˜í”Œ');
  });
  act.appendChild(play);

  const right = document.createElement('div');
  right.className = 'char-actions-right';
  if(!small){
    const chip = document.createElement('button');
    chip.className = 'btn';
    chip.style.padding='6px 10px';
    chip.style.fontSize='11px';
    chip.textContent = 'ì¦ê²¨ì°¾ê¸°';
    chip.addEventListener('click', ()=>{
      alert('ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ (ë°ëª¨)');
    });
    right.appendChild(chip);
  }
  const use = document.createElement('button');
  use.className = 'btn primary';
  use.style.padding='6px 10px';
  use.style.fontSize='11px';
  use.textContent = 'ìŠ¤íŠœë””ì˜¤ì—ì„œ ì‚¬ìš©';
  use.addEventListener('click', ()=>{
    document.getElementById('modelCurrent').textContent = char.name;
    composePrompt();
    location.hash = 'studio';
  });
  right.appendChild(use);

  act.appendChild(right);
  div.appendChild(act);
  return div;
}

function renderCharSections(){
  const grid = document.getElementById('charGrid');
  const gridAll = document.getElementById('modelGridAll');
  if(grid){
    grid.innerHTML = '';
    CHARACTER_LIST.slice(0,6).forEach(c => grid.appendChild(makeCharCard(c,true)));
  }
  if(gridAll){
    gridAll.innerHTML = '';
    CHARACTER_LIST.forEach(c => gridAll.appendChild(makeCharCard(c,false)));
  }
}
renderCharSections();

/* ìºë¦­í„° í•„í„°/ê²€ìƒ‰ (ì¶”ì²œ í˜ì´ì§€) */
(function(){
  const chips = document.querySelectorAll('[data-char-filter]');
  const search = document.getElementById('charSearchInput');
  function apply(){
    const filter = document.querySelector('[data-char-filter].active')?.dataset.charFilter || 'all';
    const q = (search?.value || '').trim().toLowerCase();
    document.querySelectorAll('#charGrid .char-card').forEach(card=>{
      const role = card.dataset.role;
      const text = card.textContent.toLowerCase();
      const okRole = (filter==='all') || (filter===role);
      const okSearch = !q || text.includes(q);
      card.style.display = (okRole && okSearch) ? '' : 'none';
    });
  }
  chips.forEach(ch=>{
    ch.addEventListener('click', ()=>{
      chips.forEach(c=>c.classList.remove('active'));
      ch.classList.add('active');
      apply();
    });
  });
  if(search) search.addEventListener('input', apply);
})();

/* ìºë¦­í„° í•„í„°/ê²€ìƒ‰ (ì „ì²´ ìºìŠ¤íŒ… í˜ì´ì§€) */
(function(){
  const search = document.getElementById('mdlSearchInput');
  function apply(){
    const langs   = Array.from(document.querySelectorAll('.mdl-filter-lang:checked')).map(el=>el.value);
    const roles   = Array.from(document.querySelectorAll('.mdl-filter-role:checked')).map(el=>el.value);
    const genders = Array.from(document.querySelectorAll('.mdl-filter-gender:checked')).map(el=>el.value);
    const q = (search?.value || '').trim().toLowerCase();

    document.querySelectorAll('#modelGridAll .char-card').forEach(card=>{
      const lang = card.dataset.lang;
      const role = card.dataset.role;
      const gender = card.dataset.gender;
      const text = card.textContent.toLowerCase();
      const okLang   = !langs.length   || langs.includes(lang);
      const okRole   = !roles.length   || roles.includes(role);
      const okGender = !genders.length || genders.includes(gender);
      const okSearch = !q || text.includes(q);
      card.style.display = (okLang && okRole && okGender && okSearch) ? '' : 'none';
    });
  }
  ['.mdl-filter-lang','.mdl-filter-role','.mdl-filter-gender'].forEach(cls=>{
    document.querySelectorAll(cls).forEach(el=> el.addEventListener('change', apply));
  });
  if(search) search.addEventListener('input', apply);
})();

/* ===== ìŠ¤íŠœë””ì˜¤: ë©”ë‰´ ìœ í‹¸ ===== */
function wireMenu(triggerId, menuId, searchId, gridId, items, getLabel, onPick){
  const btn = document.getElementById(triggerId);
  const menu = document.getElementById(menuId);
  const grid = document.getElementById(gridId);
  const search = searchId ? document.getElementById(searchId) : null;
  if(!btn || !menu || !grid) return;

  function render(filter=""){
    const list = typeof items === 'function' ? items() : items;
    const filtered = filter
      ? list.filter(x => (getLabel? getLabel(x): x).toLowerCase().includes(filter.toLowerCase()))
      : list;
    grid.innerHTML = "";
    filtered.forEach(item=>{
      const label = (getLabel? getLabel(item): item);
      const d = document.createElement('div');
      d.className = 'menu-item';
      d.textContent = label;
      const current = btn.querySelector('b')?.textContent || '';
      if(current === label) d.classList.add('active');
      d.addEventListener('click', ()=>{
        onPick(item);
        menu.classList.remove('show');
      });
      grid.appendChild(d);
    });
  }

  btn.addEventListener('click', ()=>{
    menu.classList.toggle('show');
    if(menu.classList.contains('show')) render(search ? search.value : '');
    if(search){ search.value=""; search.focus(); }
  });
  document.addEventListener('click', (e)=>{
    if(!menu.contains(e.target) && !btn.contains(e.target)) menu.classList.remove('show');
  });
  if(search) search.addEventListener('input', e=> render(e.target.value));
}

/* ëª¨ë¸ ë©”ë‰´ (ì´ë¦„ ë¦¬ìŠ¤íŠ¸) */
(function(){
  const btn = document.getElementById('modelMenuBtn');
  const menu = document.getElementById('modelMenu');
  const grid = document.getElementById('modelGridMenu');
  const search = document.getElementById('modelSearch');
  if(!btn || !menu || !grid) return;

  function render(filter=""){
    const list = MODEL_NAMES.filter(n => n.includes(filter));
    grid.innerHTML = "";
    list.forEach(name=>{
      const d = document.createElement('div');
      d.className = 'menu-item';
      d.textContent = name;
      if(document.getElementById('modelCurrent').textContent.trim() === name) d.classList.add('active');
      d.addEventListener('click', ()=>{
        document.getElementById('modelCurrent').textContent = name;
        composePrompt();
        menu.classList.remove('show');
      });
      grid.appendChild(d);
    });
  }
  btn.addEventListener('click', ()=>{
    menu.classList.toggle('show');
    if(menu.classList.contains('show')){ render(""); if(search){ search.value=""; search.focus(); } }
  });
  document.addEventListener('click', (e)=>{
    if(!menu.contains(e.target) && !btn.contains(e.target)) menu.classList.remove('show');
  });
  if(search) search.addEventListener('input', e=> render(e.target.value));

  document.getElementById('favRow')?.addEventListener('click', e=>{
    const chip = e.target.closest('.fav'); if(!chip) return;
    document.querySelectorAll('.fav').forEach(f=>f.classList.remove('active'));
    chip.classList.add('active');
    document.getElementById('modelCurrent').textContent = chip.dataset.model;
    composePrompt();
  });
})();

/* ì‚¬ì´ì¦ˆ / í¬ì¦ˆ / ê°ì • / ì•µê¸€ / ë¬´ë¹™ ë©”ë‰´ */
(function(){
  // size
  const sizeBtn  = document.getElementById('sizeMenuBtn');
  const sizeMenu = document.getElementById('sizeMenu');
  const sizeGrid = document.getElementById('sizeGrid');
  if(sizeBtn && sizeMenu && sizeGrid){
    sizeBtn.addEventListener('click', ()=>{
      sizeMenu.classList.toggle('show');
      if(!sizeMenu.classList.contains('show')) return;
      sizeGrid.innerHTML = "";
      SIZE_ITEMS.forEach(it=>{
        const d = document.createElement('div');
        d.className = 'menu-item';
        d.textContent = it.label;
        if(document.getElementById('sizeCurrent').textContent.includes(it.key)) d.classList.add('active');
        d.addEventListener('click', ()=>{
          document.getElementById('sizeCurrent').textContent = it.key + " (" + it.label.split('(')[1];
          sizeMenu.classList.remove('show');
          composePrompt();
        });
        sizeGrid.appendChild(d);
      });
    });
    document.addEventListener('click', e=>{
      if(!sizeMenu.contains(e.target) && !sizeBtn.contains(e.target)) sizeMenu.classList.remove('show');
    });
  }

  // product
  (function(){
    const btn = document.getElementById('productMenuBtn');
    const menu = document.getElementById('productMenu');
    const img  = document.getElementById('productImage');
    const thumb= document.getElementById('productThumb');
    if(!btn || !menu) return;
    btn.addEventListener('click', ()=> menu.classList.toggle('show'));
    document.addEventListener('click', e=>{
      if(!menu.contains(e.target) && !btn.contains(e.target)) menu.classList.remove('show');
    });
    if(img) img.addEventListener('change', e=>{
      const f = e.target.files && e.target.files[0];
      if(!f){ thumb.textContent='IMAGE'; return; }
      const url = URL.createObjectURL(f);
      thumb.innerHTML = `<img src="${url}" style="max-width:100%;max-height:100%;object-fit:contain;border-radius:8px">`;
    });
  })();

  // pose
  wireMenu('poseMenuBtn','poseMenu','poseSearch','poseGrid',POSE_ITEMS,null,(picked)=>{
    document.getElementById('poseCurrent').textContent = picked;
    composePrompt();
  });
  // emotion
  wireMenu('emoMenuBtn','emoMenu','emoSearch','emoGrid',EMO_ITEMS,null,(picked)=>{
    document.getElementById('emoCurrent').textContent = picked;
    composePrompt();
  });
  // angle
  wireMenu('angleMenuBtn','angleMenu','angleSearch','angleGrid',ANGLE_ITEMS,x=>x.ko,(picked)=>{
    document.getElementById('angleCurrent').textContent = picked.ko;
    renderAngleMini(picked.key);
    composePrompt();
  });
  // move
  function moveItems(){ 
    const cat = document.querySelector('#moveCats .opt.active')?.dataset.cat || 'linear';
    return MOVE_GROUPS[cat] || [];
  }
  wireMenu('moveMenuBtn','moveMenu',null,'moveGrid',moveItems,null,(picked)=>{
    const label = typeof picked==='string' ? picked : picked.ko;
    document.getElementById('moveCurrent').textContent = label;
    const keyMap={
      "Static":"static","Dolly In":"dollyIn","Dolly Out":"dollyOut","Dolly Left":"dollyLeft","Dolly Right":"dollyRight",
      "Truck Left":"truckLeft","Truck Right":"truckRight","Pan Left":"panLeft","Pan Right":"panRight",
      "Tilt Up":"tilt up","Tilt Down":"tilt down","Zoom In":"zoom in","Zoom Out":"zoom out",
      "Pedestal Up":"pedestal up","Pedestal Down":"pedestal down","Roll CW":"rollCW","Roll CCW":"rollCCW",
      "Orbit CW":"orbitCW","Orbit CCW":"orbitCCW","Crane Up":"craneUp","Crane Down":"craneDown","Crane In":"craneIn","Crane Out":"craneOut",
      "Handheld":"handheld","Steadicam":"steadicam","Rack Focus":"rackFocus"
    };
    renderMoveMini(keyMap[label] || 'static');
    composePrompt();
  });
  document.querySelectorAll('#moveCats .opt').forEach(opt=>{
    opt.addEventListener('click', ()=>{
      document.querySelectorAll('#moveCats .opt').forEach(o=>o.classList.remove('active'));
      opt.classList.add('active');
    });
  });
})();

/* ì•µê¸€/ë¬´ë¹™ ë¯¸ë‹ˆ SVG */
function renderAngleMini(key){
  const target = document.getElementById('angleMini');
  const file   = document.getElementById('angleImage');
  if(!target) return;
  if(target.dataset.hasImage==='1') return;
  const W=360,H=110;
  const svg=[`<svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">`,
  `<rect x="0" y="0" width="${W}" height="${H}" rx="10" fill="var(--preview)"/>`,
  `<line x1="10" y1="${H-18}" x2="${W-10}" y2="${H-18}" stroke="var(--bd)" stroke-width="2"/>`,
  `<circle cx="${W/2}" cy="${H-38}" r="18" fill="var(--panel)"/>`];
  function cam(x,y,rot){ svg.push(`<g transform="translate(${x},${y}) rotate(${rot||0})">
    <rect x="-12" y="-7" width="24" height="14" rx="3" fill="#ff7a21"/>
    <rect x="8" y="-4" width="8" height="8" rx="2" fill="#ff9550"/></g>`); }
  function ray(x1,y1,x2,y2){ svg.push(`<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#ff9550" stroke-width="2" stroke-dasharray="4 3"/>`); }
  const sx=W/2, sy=H-38;
  switch(key){
    case 'eye': cam(sx-110, sy, 0); ray(sx-90,sy,sx-10,sy); break;
    case 'high': cam(sx-110, sy-36, -10); ray(sx-90,sy-36,sx-10,sy-6); break;
    case 'low': cam(sx-110, sy+28, 10); ray(sx-90,sy+28,sx-10,sy+4); break;
    case 'front': cam(sx-120, sy-4, 0); ray(sx-98,sy-4,sx-10,sy-4); break;
    case 'side': cam(sx-140, sy-4, 0); ray(sx-120,sy-4,sx-30,sy-4); break;
    case 'overShoulder': cam(sx-70, sy-18, 0); ray(sx-50,sy-18,sx+10,sy-10); break;
    case 'top': cam(sx-10, sy-90, 90); ray(sx,sy-70,sx,sy-10); break;
    case 'ground': cam(sx-110, H-16, 0); ray(sx-90,H-16,sx-10,sy+16); break;
    case 'dutch': cam(sx-110, sy-4, -18); ray(sx-94,sy-10,sx-10,sy-4); break;
  }
  svg.push(`</svg>`);
  target.innerHTML = svg.join('');
  if(file){
    file.addEventListener('change', e=>{
      const f = e.target.files && e.target.files[0];
      if(!f){ target.dataset.hasImage='0'; renderAngleMini('eye'); return; }
      const url = URL.createObjectURL(f);
      target.innerHTML = `<img src="${url}" style="max-width:100%;max-height:100%;object-fit:contain;border-radius:8px">`;
      target.dataset.hasImage='1';
    }, {once:true});
  }
}
function renderMoveMini(key){
  const target = document.getElementById('moveMini');
  if(!target) return;
  const W=360,H=90,cx=W/2,cy=H/2;
  const svg=[`<svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">`,
  `<rect x="0" y="0" width="${W}" height="${H}" rx="10" fill="var(--preview)"/>`,
  `<rect x="${cx-14}" y="${cy-14}" width="28" height="28" rx="6" fill="var(--panel)"/>`];
  function arrow(x1,y1,x2,y2){ svg.push(`<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#ff9550" stroke-width="2" stroke-dasharray="4 3"/>`); }
  switch(key){
    case 'static': break;
    case 'dollyIn': arrow(40,cy,cx-18,cy); break;
    case 'dollyOut': arrow(cx-18,cy,40,cy); break;
    case 'dollyLeft': arrow(cx-50,cy,cx-18,cy); break;
    case 'dollyRight': arrow(cx+18,cy,cx+50,cy); break;
    case 'truckLeft': arrow(cx+70,cy,cx-70,cy); break;
    case 'truckRight': arrow(cx-70,cy,cx+70,cy); break;
    case 'panLeft': arrow(cx+60,cy-18,cx-60,cy-18); break;
    case 'panRight': arrow(cx-60,cy-18,cx+60,cy-18); break;
    case 'tiltUp': arrow(cx,cy+24,cx,cy-24); break;
    case 'tiltDown': arrow(cx,cy-24,cx,cy+24); break;
    case 'zoomIn': arrow(cx-80,cy,cx-22,cy); arrow(cx+80,cy,cx+22,cy); break;
    case 'zoomOut': arrow(cx-22,cy,cx-80,cy); arrow(cx+22,cy,cx+80,cy); break;
    case 'pedestalUp': arrow(cx,cy+32,cx,cy-6); break;
    case 'pedestalDown': arrow(cx,cy-32,cx,cy+6); break;
    case 'rollCW':
    case 'rollCCW': svg.push(`<circle cx="${cx}" cy="${cy}" r="28" fill="none" stroke="#ff9550" stroke-width="2" stroke-dasharray="4 4"/>`); break;
    case 'orbitCW':
    case 'orbitCCW': svg.push(`<circle cx="${cx}" cy="${cy}" r="40" fill="none" stroke="#ff9550" stroke-width="2" stroke-dasharray="4 4"/>`); break;
    case 'craneUp': arrow(cx-60,cy+18,cx-60,cy-18); break;
    case 'craneDown': arrow(cx-60,cy-18,cx-60,cy+18); break;
    case 'craneIn': arrow(cx-80,cy+18,cx-52,cy+18); break;
    case 'craneOut': arrow(cx-52,cy+18,cx-80,cy+18); break;
    case 'handheld': arrow(cx-40,cy-8,cx+40,cy+8); break;
    case 'steadicam': arrow(cx-60,cy,cx+60,cy); break;
    case 'rackFocus': arrow(cx-50,cy-6,cx-20,cy-6); arrow(cx+20,cy+6,cx+50,cy+6); break;
  }
  svg.push(`</svg>`);
  target.innerHTML = svg.join('');
}
renderAngleMini('eye');
renderMoveMini('static');

/* í”„ë¡¬í”„íŠ¸ í•©ì„± */
function sizePhrase(){
  const t = (document.getElementById('sizeCurrent').textContent || '').trim();
  if(t.startsWith('ECU')) return 'extreme close-up';
  if(t.startsWith('CU'))  return 'close-up';
  if(t.startsWith('BS'))  return 'bust shot';
  if(t.startsWith('WS'))  return 'waist-up shot';
  if(t.startsWith('KS'))  return 'knee-up shot';
  if(t.startsWith('FS'))  return 'full-body shot';
  return t;
}
function composePrompt(){
  const modelKo = document.getElementById('modelCurrent').textContent.trim() || 'ë¯¼ì •';
  const size = sizePhrase();
  const poseKo = document.getElementById('poseCurrent').textContent.trim() || 'ì„œê¸°';
  const poseMap = { 'ì„œê¸°':'standing pose','ì•‰ê¸°':'sitting pose','ê±·ê¸°':'walking pose','ë¬´ë¦ê¿‡ê¸°':'kneeling','ëˆ•ê¸°':'lying down','ê¸°ëŒ€ê¸°':'leaning pose','ì í”„':'jumping pose','í„´(ëŒê¸°)':'turning pose','ì† ì£¼ë¨¸ë‹ˆ':'hands in pockets','íŒ”ì§± ë¼ê¸°':'arms crossed','ì–´ê¹¨ ë„˜ê¸°ê¸°':'over-shoulder pose','ë°”ë‹¥ì— ì•‰ê¸°':'sitting on the floor' };
  const pose = poseMap[poseKo] || 'standing pose';

  const emoKo = document.getElementById('emoCurrent').textContent.trim() || 'ë°ìŒ';
  const emoMap = { 'ë°ìŒ':'bright','ì°¨ë¶„':'calm','ë¶€ë“œëŸ¬ì›€':'soft','ìì‹ ê°':'confident','ì‹œí¬':'chic','ë¯¸ì†Œ':'smiling','ì§„ì§€':'serious','ê°•ë ¬':'intense','ë¶„ë…¸':'angry','ìŠ¬í””':'sad','ì¦ê±°ì›€':'joyful' };
  const emo = emoMap[emoKo] || 'bright';

  const angleKo = document.getElementById('angleCurrent').textContent.trim() || 'ì•„ì´ë ˆë²¨';
  const angleKeyMap = { 'ì•„ì´ë ˆë²¨':'eye','í•˜ì´ ì•µê¸€':'high','ë¡œìš° ì•µê¸€':'low','ì •ë©´':'front','ì¸¡ë©´':'side','ì˜¤ë²„ìˆ„ë”':'overShoulder','íƒ‘ë·°':'top','ë°”ë‹¥ìƒ·':'ground','ë”ì¹˜(í‹¸íŠ¸)':'dutch' };
  const angleKey = angleKeyMap[angleKo] || 'eye';
  const angleMap = {eye:'eye-level',high:'high-angle',low:'low-angle',front:'front view',side:'side view',overShoulder:'over-shoulder view',top:'top view from above',ground:'ground-level view',dutch:'dutch tilt shot'};
  const angle = angleMap[angleKey];

  const moveKo = document.getElementById('moveCurrent').textContent.trim() || 'Static';
  const moveKeyMap = { 'Static':'static','Dolly In':'dolly in','Dolly Out':'dolly out','Dolly Left':'dolly left','Dolly Right':'dolly right','Truck Left':'truck left','Truck Right':'truck right','Pan Left':'pan left','Pan Right':'pan right','Tilt Up':'tilt up','Tilt Down':'tilt down','Zoom In':'zoom in','Zoom Out':'zoom out','Pedestal Up':'pedestal up','Pedestal Down':'pedestal down','Roll CW':'roll clockwise','Roll CCW':'roll counter-clockwise','Orbit CW':'orbit clockwise','Orbit CCW':'orbit counter-clockwise','Crane Up':'crane up','Crane Down':'crane down','Crane In':'crane in','Crane Out':'crane out','Handheld':'handheld camera','Steadicam':'steadicam shot','Rack Focus':'rack focus'};
  const move = moveKeyMap[moveKo] || 'static camera';

  const productDesc = (document.getElementById('productDesc')?.value || '').trim();
  const extra = (document.getElementById('extraDesc')?.value || '').trim();

  const parts = [
    `${modelKo} style AI fashion model`,
    size,
    pose,
    `${emo} expression`,
    angle,
    move,
    productDesc ? `wearing ${productDesc}` : '',
    extra
  ].filter(Boolean);
  document.getElementById('promptOutput').textContent = parts.join(', ');
}
document.querySelectorAll('#view-studio input').forEach(el=>{
  if(el.id === 'promptInput') return;
  el.addEventListener('input', composePrompt);
});
composePrompt();

/* í”„ë¡¬í”„íŠ¸ ì¸í’‹ + ìŒì„± */
(function(){
  const promptInput = document.getElementById('promptInput');
  const promptEnter = document.getElementById('promptEnter');
  const promptMic   = document.getElementById('promptMic');
  function applyPromptInput(){
    const v = (promptInput?.value || '').trim();
    if(!v) return;
    const extra = document.getElementById('extraDesc');
    if(extra){
      extra.value = extra.value ? (extra.value + ', ' + v) : v;
      composePrompt();
    }
    promptInput.value='';
  }
  if(promptEnter) promptEnter.addEventListener('click', applyPromptInput);
  if(promptInput) promptInput.addEventListener('keydown', e=>{
    if(e.key==='Enter'){ e.preventDefault(); applyPromptInput(); }
  });

  let recognition, recActive=false;
  function startVoice(){
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(!SR){ alert('í˜„ì¬ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìŒì„± ì¸ì‹ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Chrome ê³„ì—´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.'); return; }
    recognition = new SR();
    recognition.lang='ko-KR';
    recognition.interimResults=false;
    recognition.maxAlternatives=1;
    recognition.onresult = ev=>{
      const text = ev.results[0][0].transcript;
      if(promptInput) promptInput.value = (promptInput.value ? promptInput.value + ' ' : '') + text;
    };
    recognition.onend = ()=>{ recActive=false; promptMic?.classList.remove('on'); };
    recognition.onerror= ()=>{ recActive=false; promptMic?.classList.remove('on'); };
    recActive=true;
    promptMic?.classList.add('on');
    recognition.start();
  }
  if(promptMic) promptMic.addEventListener('click', ()=>{
    if(recognition && recActive){ recognition.stop(); return; }
    startVoice();
  });

  document.getElementById('togglePrompt')?.addEventListener('click', ()=>{
    const code = document.getElementById('promptOutput');
    code.style.display = (code.style.display === 'none') ? 'block' : 'none';
  });
})();

/* ===== ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ ===== */
function openModal(id){ document.getElementById(id)?.classList.add('show'); }
function closeModal(id){ document.getElementById(id)?.classList.remove('show'); }
document.querySelectorAll('[data-close]').forEach(btn=>{
  btn.addEventListener('click', e=> closeModal(e.currentTarget.dataset.close));
});
document.querySelectorAll('.modal-backdrop').forEach(b=>{
  b.addEventListener('click', e=> closeModal(e.currentTarget.getAttribute('data-close')));
});
document.getElementById('loginBtnTop')?.addEventListener('click', ()=> openModal('loginModal'));
document.getElementById('signupBtnTop')?.addEventListener('click', ()=> openModal('signupModal'));
document.getElementById('openSignupFromLogin')?.addEventListener('click', e=>{
  e.preventDefault(); closeModal('loginModal'); openModal('signupModal');
});

/* ë¡œê·¸ì¸ + ë§ˆì´í˜ì´ì§€ (ë°ëª¨: ì„œë²„ ì—†ì´ localStorageë§Œ ì‚¬ìš©) */
(function(){
  const KEY='mlm_auth';
  function setAuth(obj){ localStorage.setItem(KEY, JSON.stringify(obj||{})); }
  function getAuth(){ try{ return JSON.parse(localStorage.getItem(KEY)||'{}'); }catch(e){ return {}; } }
  function clearAuth(){ localStorage.removeItem(KEY); }

  const loginSubmit = document.getElementById('loginSubmit');
  if(loginSubmit){
    loginSubmit.addEventListener('click', async ()=>{
      const em = document.getElementById('loginEmail').value.trim();
      const pw = document.getElementById('loginPw').value;
      const okEm = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(em);
      document.getElementById('loginEmailErr').classList.toggle('show', !okEm);
      document.getElementById('loginPwErr').classList.toggle('show', pw.length<1);
      if(!okEm || pw.length<1) return;

      // ì„œë²„ í˜¸ì¶œ ì—†ì´ ë¡œì»¬ì—ì„œë§Œ ì²˜ë¦¬
      try{
        toast('ë¡œê·¸ì¸ ì¤‘... (ë°ëª¨)');
        setAuth({
          email: em,
          name:  em.split('@')[0],
          token: ''
        });
        closeModal('loginModal');
        ensureMyPageUI();
        toast('ë¡œê·¸ì¸ ì™„ë£Œ (ë°ëª¨)');
      }catch(err){
        console.error(err);
        toast('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });
  }

  function ensureMyPageUI(){
    const topbar = document.querySelector('.topbar-inner');
    if(!topbar) return;
    if(topbar.querySelector('.mypage')) return;
    const auth = getAuth();
    if(!auth.email) return;

    const loginBtn = document.getElementById('loginBtnTop');
    const signupBtn= document.getElementById('signupBtnTop');
    if(loginBtn) loginBtn.style.display='none';
    if(signupBtn) signupBtn.style.display='none';

    const wrap = document.createElement('div');
    wrap.className='mypage';
    wrap.innerHTML = `
      <button class="mypage-btn" id="mypageBtn">
        <span class="mypage-avatar"></span>
        <span id="mypageName">${auth.name || 'User'}</span>
      </button>
      <div class="mypage-menu" id="mypageMenu">
        <a href="#" id="goProfile">í”„ë¡œí•„</a>
        <a href="#" id="goBilling">êµ¬ë…/ê²°ì œ</a>
        <a href="#" id="goProjects">ë‚´ í”„ë¡œì íŠ¸</a>
        <a href="#" id="doLogout">ë¡œê·¸ì•„ì›ƒ</a>
      </div>`;
    document.querySelector('.topbar-right').insertBefore(wrap, document.querySelector('.themebtn'));

    const btn = wrap.querySelector('#mypageBtn');
    btn.addEventListener('click', ()=> wrap.classList.toggle('open'));
    document.addEventListener('click', e=>{
      if(!wrap.contains(e.target)) wrap.classList.remove('open');
    });
    wrap.querySelector('#doLogout').addEventListener('click', e=>{
      e.preventDefault();
      clearAuth();
      location.reload();
    });
    wrap.querySelector('#goProfile').addEventListener('click', e=>{ e.preventDefault(); alert('ë°ëª¨: í”„ë¡œí•„ í˜ì´ì§€ë¡œ ì´ë™'); });
    wrap.querySelector('#goBilling').addEventListener('click', e=>{ e.preventDefault(); alert('ë°ëª¨: êµ¬ë…/ê²°ì œ í˜ì´ì§€ë¡œ ì´ë™'); });
    wrap.querySelector('#goProjects').addEventListener('click', e=>{ e.preventDefault(); alert('ë°ëª¨: ë‚´ í”„ë¡œì íŠ¸ë¡œ ì´ë™'); });
  }
  if(getAuth().email) ensureMyPageUI();
})();

/* íšŒì›ê°€ì… step íë¦„ (ë°ëª¨: ì„œë²„ ì—†ì´ ë™ì‘) */
(function(){
  const tabs = document.querySelectorAll('#signupModal .tab');
  function setStep(n){
    ['st1','st2','st3','st4','st5'].forEach((id,idx)=>{
      const el = document.getElementById(id);
      if(el) el.style.display = (idx===n-1)?'block':'none';
    });
    tabs.forEach(t=> t.classList.toggle('on', Number(t.dataset.step)===n));
  }
  setStep(1);

  document.getElementById('s1next')?.addEventListener('click', ()=>{
    const nm = document.getElementById('s1name').value.trim();
    const em = document.getElementById('s1e').value.trim();
    const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(em);
    document.getElementById('s1nameErr').classList.toggle('show', !nm);
    document.getElementById('s1err').classList.toggle('show', !ok);
    if(nm && ok) setStep(2);
  });
  document.getElementById('s2next')?.addEventListener('click', ()=>{
    const cd = document.getElementById('s2c').value.trim();
    const ok = /^\d{6}$/.test(cd); // ì„ì‹œ ì •ì±…: 6ìë¦¬ ìˆ«ìë©´ OK
    document.getElementById('s2err').classList.toggle('show', !ok);
    if(ok) setStep(3);
  });
  document.getElementById('s2resend')?.addEventListener('click', e=>{
    e.preventDefault();
    alert('ì¸ì¦ì½”ë“œ ì¬ì „ì†¡ (ë°ëª¨)');
  });
  function pwPolicy(s){
    const rules=[/[A-Z]/,/[a-z]/,/\d/,/[^A-Za-z0-9]/]; let c=0; rules.forEach(r=>{ if(r.test(s)) c++; });
    return s.length>=8 && c>=3;
  }
  document.getElementById('s3next')?.addEventListener('click', ()=>{
    const p1=document.getElementById('s3p1').value;
    const p2=document.getElementById('s3p2').value;
    const ok = pwPolicy(p1) && p1===p2;
    document.getElementById('s3err').classList.toggle('show', !ok);
    if(ok) setStep(4);
  });
  const need=['c_tos','c_privacy','c_age'];
  document.getElementById('c_all')?.addEventListener('change', e=>{
    ['c_tos','c_privacy','c_age','c_mkt_email','c_mkt_sms','c_xfer'].forEach(id=>{
      const el=document.getElementById(id); if(el) el.checked = e.target.checked;
    });
  });
  document.getElementById('s4next')?.addEventListener('click', async ()=>{
    const missing = need.some(id=> !document.getElementById(id).checked);
    document.getElementById('cErr').classList.toggle('show', missing);
    if(missing){
      toast('í•„ìˆ˜ ë™ì˜ í•­ëª©ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.');
      return;
    }

    const name  = document.getElementById('s1name').value.trim();
    const email = document.getElementById('s1e').value.trim();
    const pw    = document.getElementById('s3p1').value;
    if(!name || !email || !pw){
      toast('ì´ë¦„/ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”.');
      return;
    }

    // ì—¬ê¸°ì„œëŠ” ì„œë²„ í˜¸ì¶œ ì—†ì´ ë°”ë¡œ ì™„ë£Œ ë‹¨ê³„ë¡œ ì´ë™ (ë°ëª¨)
    setStep(5);
    const loginEmail = document.getElementById('loginEmail');
    if(loginEmail) loginEmail.value = email;
    toast('íšŒì›ê°€ì… ì™„ë£Œ! (ë°ëª¨)');
  });
  document.getElementById('toLogin')?.addEventListener('click', ()=>{
    closeModal('signupModal'); openModal('loginModal');
  });
})();

/* â€œì „ì²´ ìºë¦­í„°ì—ì„œ ê³ ë¥´ê¸°â€ì—ì„œ ìŠ¤íŠœë””ì˜¤ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ */
document.getElementById('btnBackToStudioFromModels')?.addEventListener('click', e=>{
  e.preventDefault(); location.hash = 'studio';
});

/* ===== í”„ë¦¬ë·°: AI ì´ë¯¸ì§€ & ì˜ìƒ ìƒì„± API ì—°ë™ (server.jsì™€ ë§ì¶¤) ===== */
(function(){
  const previewBox = document.getElementById('previewBox');
  const promptCode = document.getElementById('promptOutput');
  if(!previewBox || !promptCode) return;

  const bar = document.createElement('div');
  bar.style.display='flex';
  bar.style.gap='8px';
  bar.style.margin='4px 0 10px';
  bar.style.flexWrap='wrap';

  const imgBtn = document.createElement('button');
  imgBtn.className='btn';
  imgBtn.style.fontSize='12px';
  imgBtn.textContent='AI ì´ë¯¸ì§€ ìƒì„±';

  const vidBtn = document.createElement('button');
  vidBtn.className='btn soft';
  vidBtn.style.fontSize='12px';
  vidBtn.textContent='ì´ë¯¸ì§€ë¡œ ì˜ìƒ ë§Œë“¤ê¸°';

  bar.appendChild(imgBtn);
  bar.appendChild(vidBtn);
  previewBox.insertAdjacentElement('afterend', bar);

  // ìµœê·¼ ìƒì„± ì´ë¯¸ì§€ (ì˜ìƒ ìƒì„±ìš©)
  let lastImages = [];

  // ì´ë¯¸ì§€ ìƒì„±: POST /api/generate-image  (server.js ê¸°ì¤€)
  imgBtn.addEventListener('click', async ()=>{
    const prompt = (promptCode.textContent || '').trim();
    if(!prompt){
      toast('í”„ë¡¬í”„íŠ¸ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤. ìŠ¤íŠœë””ì˜¤ì—ì„œ ì˜µì…˜ì„ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”.');
      return;
    }
    toast('ì´ë¯¸ì§€ ìƒì„± ì¤‘...');

    try{
      const r = await fetch(API.image,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({prompt})
      });
      const data = await r.json().catch(()=>null);
      if(!r.ok || !data || data.ok === false){
        toast(data?.error || 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        return;
      }
      const url = data.imageUrl || (Array.isArray(data.images) ? data.images[0] : '');
      if(!url){
        toast('ì´ë¯¸ì§€ URLì´ ì‘ë‹µì— ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      lastImages = Array.isArray(data.images) && data.images.length ? data.images : [url];

      previewBox.innerHTML = `<img src="${url}" style="max-width:100%;max-height:100%;object-fit:contain;border-radius:12px">`;
      toast('ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ');
    }catch(err){
      console.error(err);
      toast('ì„œë²„ ì˜¤ë¥˜ë¡œ ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    }
  });

  // ì˜ìƒ ìƒì„±: POST /api/generate-video (server.js ê¸°ì¤€, JSONìœ¼ë¡œ videoUrl ë°˜í™˜)
  vidBtn.addEventListener('click', async ()=>{
    if(!lastImages.length){
      toast('ë¨¼ì € ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.');
      return;
    }
    toast('ì˜ìƒ ìƒì„± ì¤‘...');

    try{
      const r = await fetch(API.video,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({images:lastImages})
      });
      const data = await r.json().catch(()=>null);
      if(!r.ok || !data || data.ok === false || !data.videoUrl){
        toast(data?.error || 'ì˜ìƒ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        return;
      }
      const url = data.videoUrl;
      previewBox.innerHTML = '';
      const vid = document.createElement('video');
      vid.controls = true;
      vid.autoplay = true;
      vid.style.maxWidth='100%';
      vid.style.maxHeight='100%';
      vid.style.borderRadius='12px';
      vid.src = url;
      previewBox.appendChild(vid);
      toast('ì˜ìƒ ìƒì„± ì™„ë£Œ');
    }catch(err){
      console.error(err);
      toast('ì„œë²„ ì˜¤ë¥˜ë¡œ ì˜ìƒ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    }
  });
})();<script>
const BACKEND_BASE = 'https://modemode-ai.onrender.com';

// âœ… API ì—°ê²° í…ŒìŠ¤íŠ¸ìš© í•¨ìˆ˜
async function testApiConnection() {
  const res = await fetch(`${BACKEND_BASE}/api/gemini-image`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ prompt: "í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€", count: 2 })
  });
  const data = await res.json();
  alert(`ì„œë²„ ì—°ê²° ì„±ê³µ!\nì´ë¯¸ì§€ ê°œìˆ˜: ${data.images?.length || 0}`);
}
</script>
</body>
</html>